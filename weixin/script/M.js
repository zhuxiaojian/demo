(function(a,b){if(typeof module!=="undefined"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define(b)}else{a.Promise=b.call(a)}}}(this,function(){function f(j){if(!(this instanceof f)){return new f(j)}this.status="pending";this.value;this.reason;this._resolves=[];this._rejects=[];if(d(j)){j(this.resolve.bind(this),this.reject.bind(this))}return this}f.prototype.then=function(n,m){var l=this._next||(this._next=f());var k=this.status;var j;if("pending"===k){d(n)&&this._resolves.push(n);d(m)&&this._rejects.push(m);return l}if("resolved"===k){if(!d(n)){l.resolve(n)}else{try{j=n(this.value);c(l,j)}catch(o){this.reject(o)}}return l}if("rejected"===k){if(!d(m)){l.reject(m)}else{try{j=m(this.reason);c(l,j)}catch(o){this.reject(o)}}return l}};f.prototype.resolve=function(j){if("rejected"===this.status){throw Error("Illegal call.")}this.status="resolved";this.value=j;this._resolves.length&&i(this);return this};f.prototype.reject=function(j){console.log(this.status);if("resolved"===this.status){throw Error("Illegal call.")}this.status="rejected";this.reason=j;this._rejects.length&&i(this);return this};if(!f.prototype.done){f.prototype.done=function(j,k){return this.then(j,k).then(null,function(l){setTimeout(function(){throw l},0)})}}f.cast=function(j){var k=f();if(j instanceof f){return e(k,j)}else{return f.resolve(j)}};f.resolve=function(j){var k=f();if(h(j)){return b(k,j)}else{return k.resolve(j)}};f.all=function(j){};f.reject=function(k){if(!(k instanceof Error)){throw Error("reason must be an instance of Error")}var j=f();j.reject(k);return j};function c(k,j){if(j===k){k.reject(new Error("TypeError"))}if(j instanceof f){return e(k,j)}else{if(h(j)){return b(k,j)}else{return k.resolve(j)}}}function e(l,k){var j=k.status;if("pending"===j){k.then(l.resolve.bind(l),l.reject.bind(l))}if("resolved"===j){l.resolve(k.value)}if("rejected"===j){l.reject(k.reason)}return l}function b(o,j){var k;var m=a(function(p){if(k){return}c(o,p);k=true});var l=a(function(p){if(k){return}o.reject(p);k=true});try{j.then.call(j,m,l)}catch(n){if(!k){throw n}else{o.reject(n)}}return o}function i(o){var m=o.status;var l=o["resolved"===m?"_resolves":"_rejects"];var k=o["resolved"===m?"value":"reason"];var n;var j;while(n=l.shift()){j=n.call(o,k);c(o._next,j)}return o}function d(j){return"function"===g(j)}function g(j){var k={};return k.toString.call(j).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function h(j){return j&&j.then&&d(j.then)}function a(j){var k;return function(){if(k){return}j.apply(this,arguments);k=true}}return f}));(function(a){var h=a;var g={};g.obs=function(k){var i={},j=Array.prototype.slice;k.on=function(l,m){if(typeof m==="function"){l.replace(/[^\s]+/g,function(n,o){(i[n]=i[n]||[]).push(m);m.typed=o>0})}return k};k.off=function(o,p){if(o=="*"){i={}}else{if(p){var m=i[o];for(var n=0,l;(l=m&&m[n]);++n){if(l===p){m.splice(n,1)}}}else{o.replace(/[^\s]+/g,function(q){i[q]=[]})}}return k};k.trigger=function(m){var l=j.call(arguments,1),o=i[m]||[];for(var n=0,p;(p=o[n]);++n){if(!p.busy){p.busy=true;p.apply(k,p.typed?[m].concat(l):l);if(p.one){o.splice(n,1);n--}p.busy=false}}return new Promise(function(r,q){r(l);return k})};k.one=function(l,m){if(m){m.one=true}return k.on(l,m)};return k};g.temple=function(m,l){var k=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(q){var p=Math.random()*16|0,o=q=="x"?p:(p&3|8);return o.toString(16)})};var n="$"+Date.now(),j=function(r){var p,o=[n],q=[[]];for(p in r){o.push(p);q.push(r[p])}return(new Function(o,j.$)).apply(r,q).join("")};j.$=j.$||n+".push('"+m.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("{#").join("\t").split("{{").join("\t").replace(/((^|#})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)}}/g,"',$1,'").split("\t").join("');").split("#}").join(n+".push('").split("\r").join("\\'")+"');return "+n;var i=l?j(l):j;return new Promise(function(p,o){p(i)})};if(typeof top!="object"){return}var d,f=g.obs({}),c=window.addEventListener,e=document;function b(i){i=i.type?location.hash:i;if(i!=d){f.trigger("pop",i)}d=i}if(c){c("popstate",b,false);e.addEventListener("DOMContentLoaded",b,false)}g.route=function(i){if(typeof i==="function"){return f.on("pop",i)}if(history.pushState){history.pushState(0,0,i)}b(i)};h.MO=g})(window);(function(b){function a(c){var d=c;this.linkUrl=d.linkUrl||b.location.href;this.imgUrl=d.imgUrl||"";this.shareTitle=d.shareTitle||document.title;this.souhuTitle=d.souhuTitle||"";this.descContent=d.descContent||"";this.pict="";this.appid="";this._initShare();return this}a.prototype={constructor:a,_initShare:function(){var d=this;document.addEventListener("WeixinJSBridgeReady",function c(){WeixinJSBridge.on("menu:share:appmessage",function(e){d._shareFriend()});WeixinJSBridge.on("menu:share:timeline",function(e){d._shareTimeline()})},false);document.addEventListener("WeixinJSBridgeReady",function c(){WeixinJSBridge.call("hideToolbar")})},_shareFriend:function(){var c=this;WeixinJSBridge.invoke("sendAppMessage",{"appid":c.appid,"img_url":c.imgUrl,"img_width":"200","img_height":"200","link":c.linkUrl,"desc":c.descContent,"title":c.shareTitle},function(d){})
},_shareTimeline:function(){var c=this;WeixinJSBridge.invoke("shareTimeline",{"img_url":c.imgUrl,"img_width":"200","img_height":"200","link":c.linkUrl,"desc":c.descContent,"title":c.shareTitle},function(d){})},};b.pageShare=a})(window);